<div class="layuimini-container">
    <form id="app-form" class="layui-form layuimini-form">
        <div class="layui-form-item">
            <label class="layui-form-label">区域</label>
            <div class="layui-input-block">
                <select name="type" lay-verify="required">
				  <option value="T" {if $row.type eq 'T'}selected{/if}>顶飘位置</option>
				  <option value="A" {if $row.type eq 'A'}selected{/if}>顶部横幅区域</option>
				  <option value="B1" {if $row.type eq 'B1'}selected{/if}>中部推荐</option>
				  <option value="B2" {if $row.type eq 'B2'}selected{/if}>中部视频</option>
				  <option value="B3" {if $row.type eq 'B3'}selected{/if}>中部直播</option>
				  <option value="B4" {if $row.type eq 'B4'}selected{/if}>中部游戏</option>
				  <option value="C" {if $row.type eq 'C'}selected{/if}>底部列表</option>
				  <option value="D" {if $row.type eq 'D'}selected{/if}>弹窗位置</option>
				  <option value="E" {if $row.type eq 'E'}selected{/if}>底飘位置</option>
				  <option value="F" {if $row.type eq 'F'}selected{/if}>约炮位置</option>
                </select>
            </div>
        </div>

        <div class="layui-form-item">
            <label class="layui-form-label">位置(越小越靠前)</label>
            <div class="layui-input-block">
                <input type="number" name="weizhi" class="layui-input" lay-verify="required" placeholder="请输入产品所在位置" value="{$row.weizhi|default='1'}">
            </div>
        </div>
		
		<div class="layui-form-item">
            <label class="layui-form-label">产品名称</label>
            <div class="layui-input-block">
                <input type="text" name="name" class="layui-input" lay-verify="required" placeholder="请输入产品名称" value="{$row.name|default=''}">
            </div>
        </div>

        <div class="layui-form-item">
            <label class="layui-form-label required">产品图片</label>
            <div class="layui-input-block layuimini-upload">
                <input name="img" class="layui-input layui-col-xs6" lay-verify="required" placeholder="请上传产品图片" value="{$row.img|default=''}">
                <div class="layuimini-upload-btn">
                    <span><a class="layui-btn" data-upload="img" data-upload-number="one" data-upload-exts="png|jpg|ico|jpeg|gif|webp" data-upload-icon="image"><i class="fa fa-upload"></i> 上传</a></span>
                    <span><a class="layui-btn layui-btn-normal" id="select_logo" data-upload-select="img" data-upload-number="one" data-upload-mimetype="image/*"><i class="fa fa-list"></i> 选择</a></span>
                </div>
            </div>
        </div>

        <div class="layui-form-item">
            <label class="layui-form-label">产品链接</label>
            <div class="layui-input-block">
                <input type="text" name="url" class="layui-input" lay-verify="required" placeholder="请输入产品链接,必须以http://或者https://开头" value="{$row.url|default=''}">
            </div>
        </div>

        <div class="layui-form-item">
            <label class="layui-form-label">测试链接</label>
            <div class="layui-input-block">
                <input type="text" name="csurl" class="layui-input" placeholder="请输入产品链接,必须以http://或者https://开头" value="{$row.csurl|default=''}">
            </div>
        </div>
		
        <div class="layui-form-item">
            <label class="layui-form-label">显示平台</label>
            <div class="layui-input-block">&nbsp;
                <input name="is_show[]" type="checkbox" value="1" {if condition="in_array(1,explode(',',$row.is_show))"}checked{/if} class="isshow" />甲平台
                <input name="is_show[]" type="checkbox" value="2" {if condition="in_array(2,explode(',',$row.is_show))"}checked{/if} class="isshow" />乙平台
                <input name="is_show[]" type="checkbox" value="3" {if condition="in_array(3,explode(',',$row.is_show))"}checked{/if} class="isshow" />丙平台
            </div>
        </div>
        
        <div class="layui-form-item">
            <label class="layui-form-label">下载次数</label>
            <div class="layui-input-block">
                <input type="number" name="downtime" class="layui-input" placeholder="请输入产品下载次数" value="{$row.downtime|default=''}">
            </div>
        </div>

        <div class="layui-form-item">
            <label class="layui-form-label">产品简介</label>
            <div class="layui-input-block">
                <input type="text" name="slogan" class="layui-input" placeholder="请输入产品简介" value="{$row.slogan|default=''}">
            </div>
        </div>

        <div class="layui-form-item layui-form-text">
            <label class="layui-form-label">备注信息</label>
            <div class="layui-input-block">
                <textarea name="remark" class="layui-textarea" placeholder="请输入备注信息">{$row.remark|default=''}</textarea>
            </div>
        </div>

        <div class="hr-line"></div>
        <div class="layui-form-item text-center">
            <button type="submit" class="layui-btn layui-btn-normal layui-btn-sm" lay-submit>确认</button>
            <button type="reset" class="layui-btn layui-btn-primary layui-btn-sm">重置</button>
        </div>

    </form>
</div>
<script>
/*
layui.use('jquery', function(){
    var $ = layui.$;
    $(".isshow").click(function(){
        var is_show =[]; 
        $('input[name="is_show1"]:checked').each(function(index, domEle){ 
            is_show.push($(this).val()); 
        });
        console.log(is_show);
    })
});

layui.use('form', function(){
	    var form = layui.form;
	    form.on('submit(submit)', function(data){
 		    
 		    //获取checkbox数据,组装成数组!!!!!!
 		    var is_show =[]; 
			$('input[name="is_show"]:checked').each(function(index, domEle){ 
				is_show.push($(this).val()); 
			});
			data.field.is_show = is_show;
		    
		    layer.confirm('您确认保存设置吗', {icon: 3, title:'提示'}, function(index){
		  		layer.close(index);//关闭询问弹框
	          	$.ajax({
	          		type: "POST", 
	        	  	url: {:url('products/edit')}, 
	        	  	data: data.field,
	        	  	traditional: true, //是否使用传统的方式浅层序列化,若有数组参数或对象参数需要设置true!!!!!!
	        	  	dataType:"json",
	        	  	success: function(returnData){
	        		  	if(returnData.code==1){
	        		  		//修改隐藏input[oldCrontabStatusInt]的值
	        		  		var new_oldCrontabStatusInt = returnData.obj;
	        		  		$('input[name=oldCrontabStatusInt]').val(new_oldCrontabStatusInt);
	        			  	layer.msg('保存成功', {
	            				icon: 1,
	            				time: 20000, //20s后自动关闭
	            			    btn: ['确定']
	            		  	}, function(){
	            				parent.layer.closeAll();
	            		  	});
	                  	}else{
	                      	layer.msg(returnData.msg, {icon: 2});
	                  	}
	        	  	}
	          	});  	
	        });
		  
		    return false; //阻止表单跳转。如果需要表单跳转，去掉这段即可。
		});
	});*/
</script>