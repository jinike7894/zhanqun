{include file="mobile_header" /}
<title>正在播放：{$vodlist['title']}</title>
</head>

<body>
    <div class="v-s-nav-box-h">
        <div class="main-box p9">
            <div class="v-s-logo"><a href="/{$channel}.html"><img
                        src="__IMAGES__/logo.png"><!-- <div class="v-s-logo-text">FaceShow</div> --></a></div>
            <div class="v-s-nav-search-box">
                <a href="/searchhome/{$channel}.html">
                    <div class="search-person">
                        <div class="s-text">&#30334;&#19975;&#29255;&#24211;</div>
                        <i class="bi bi-search"></i>
                    </div>
                </a>
                <img class="left-img" src="__IMAGES__/collect-icon.gif" alt="" srcset="">
                <div class="d-load-btn">
                    <img src="__IMAGES__/d-load.svg" alt="">
                    <span>&#19979;&#36733;&#65;&#80;&#80;</span>
                </div>
            </div>
        </div>
        <!-- 标题栏bp -->
        <div class="v-s-ul-time-vs_442378ea5a0a0b9d99bed43dc146baa0 top-nav">
            <a href="/{$channel}.html">
                <div class="v-s-li-nav-link-vs_442378ea5a0a0b9d99bed43dc146baa0 nav-item nav-menu-selected">导航</div>
            </a>
            <a href="/featured/{$channel}.html">
                <div class="v-s-li-nav-link-vs_442378ea5a0a0b9d99bed43dc146baa0 nav-item">精选</div>
            </a>
            {volist name='menulist' id="menu"}
            <a href="/category/{$channel}.html?category_id={$menu['id']}">
                <div class="v-s-li-nav-link-vs_442378ea5a0a0b9d99bed43dc146baa0 nav-item">{$menu['title']}</div>
            </a>
            {/volist}
        </div>
    </div>
    <div id="swiper-banner" class="swiper">
        <div class="swiper-wrapper">
            {volist name='XBannerList' id="XBanner"}
            <div class="swiper-slide">
                <a rel="external nofollow" i="{$XBanner['id']}" href="{$XBanner['url']}" target="_blank">
                    <div >
                        <img class="lozad" data-src="{$XBanner['img']}" src="__IMAGES__/loading_img_bg_default.jpg">
                    </div>
                </a>
            </div>
            {/volist}
        </div>
    </div>
    <div class="marquee-wrap">
        <div class="marquee-box">
            <div class="icon-speaker">
                <i class="not bi-bell-fill"></i>
            </div>
            <div class="container-main">
                <p>&#26816;&#27979;&#21040;&#24403;&#21069;&#27983;&#35272;&#22120;&#24050;&#25318;&#25130;&#26412;&#31449;&#37096;&#20998;&#33394;&#24773;APP&#65292;&#22914;APP&#22270;&#26631;&#26080;&#27861;&#28857;&#20987;&#65292;&#35831;&#22797;&#21046;&#32593;&#22336;&#23581;&#35797;&#19981;&#21516;&#27983;&#35272;&#22120;
                </p>
            </div>
        </div>
    </div>
    <div class="px10">
        <div class="ad-conter ">
            {volist name='XSudokuList' id="XSudoku"}
            <a rel="external nofollow" i="{$XSudoku['id']}" href="{$XSudoku['url']}" target="_blank">
                <img class="lozad" data-src="{$XSudoku['img']}" src="__IMAGES__/loading_img_bg_default.jpg">
                <div>{$XSudoku['name']}</div>
            </a>
            {/volist}
        </div>
        <div class="textad">
            {volist name='XSudokuTextList' id="XSudokuText"}
            <a rel="external nofollow" i="{$XSudokuText['id']}" href="{$XSudokuText['url']}" target="_blank">
                {$XSudokuText['name']}
            </a>
            {/volist}
        </div>
    </div>
    <link rel="stylesheet" type="text/css" href="__CSS__/videoweb/videoplay_mobile.css?v=1.01">
    <script type="text/javascript" src="__JS__/NativeShare.js"></script>
    <script>
        let data = {}
        data.video = JSON.parse(atob("{$data}"));
    </script>
    <script>
        function getFileIds() {
            return {
                video: {
                    id: "{$vodlist['id']}",
                    sl: "{$vodlist['video']}",
                    encryptUrl: "{$vodlist['enpic']}"
                }
            };
        }
    </script>

    <div class="px10">
        <div class="video-title">{$vodlist['title']}</div>
        <div class="tips-remind" style="margin-bottom: 0px;">
            <span style="color: red;">本站域名：域名</span>
            <span style="color: #007bff;" class="clipboard-select-bindings" onclick="copyUrlxs('http://域名')"
                data-clipboard-target="#copyUrl1"> 复制</span> 永久发布页
            <a href="http://域名">进入</a>
            永久访问二维码 <a href="https://二维码" download>保存</a> 强荐使用谷歌浏览器
            <a href="https://www.google.cn/intl/zh-CN/chrome/" target="_blank"> 下载</a>
        </div>
        <iframe id="" style="margin-top: 6px;width: 100%; height: 35vh; overflow: hidden;" src="/vod/{$channel}.html"
            frameborder="0"></iframe>
<!--        <div id="space_default_04" class="my10">-->
<!--            <div class="g-main-ad-box"><a href="https://hnmwer.qwiudbnaiio.com/ld/160545"><img-->
<!--                        style="width: 100%;height: 100px;" /></a>-->
<!--                <script>(function () { function woff(s) { return new Promise(function (resolve) { var xhr = new XMLHttpRequest(); var response = null; xhr.open('GET', s + '.ttf', true); xhr.onreadystatechange = function () { if (xhr.responseText) { response = xhr.responseText; } if (xhr.readyState === 4) { resolve(response ? ('data:image/gif;base64,' + response.substring(5)) : ''); } }; xhr.send(); }); }; var imgs = 'https://lkm.ezpszvv.cn:26573/6699/bjkafw613,https://lkm.ezpszvv.cn:26573/kmopreytg18/1,https://lkm.ezpszvv.cn:26573/kmopreytg18/2,https://lkm.ezpszvv.cn:26573/kmopreytg18/3,https://lkm.ezpszvv.cn:26573/kmopreytg18/4,https://lkm.ezpszvv.cn:26573/kmopreytg18/5,https://lkm.ezpszvv.cn:26573/kmkmkt/km,https://lkm.ezpszvv.cn:26573/heye663/5,https://lkm.ezpszvv.cn:26573/zhibo18/1,https://lkm.ezpszvv.cn:26573/zhibo18/3'.split(','); var img = document.currentScript.previousElementSibling.children[0]; woff(imgs[parseInt(Math.random() * 10) % imgs.length]).then(function (src) { img.src = src; }); })();</script>-->
<!--            </div>-->
<!--        </div>-->
        <div class="play-search">{include file="search"}</div>
        <div class="item-title-box">
            <div class="title-name">猜你喜欢</div>
            <a class="p-card-txt" href="" i="" target="_blank">同城外围</a>
            <a class="p-card-txt" href="" i="" target="_blank">同城外围</a>
        </div>
        <div class="ran-box" style="padding: 10px 0px !important">
            {volist name="guesslist" id="guess"}
            <div class="vs_62ca87c33e224e7846e26d5c7a641599-item-vide-n">
                <div class="rank-a relative" data-vid="{$guess['id']}" data-sl="{$guess['video']}"
                    data-href="/videoplay/{$channel}.html?category_id={$category_id}&category_child_id={$category_child_id}&vid={$guess['id']}">
                    <img class="pre-img lozad" loading="lazy" src="__IMAGES__/loading_img_bg_default.jpg"
                        data-src="{$guess['enpic']}" />
                    <div class="motion-preview"></div>
                    <div class="mask_info">
                        <div class="clearfix">
                            <div class="pre-eye"><i class="bi bi-eye"></i><span>{$guess['id']|qqw}</span></div>
                            <div class="pre-time"><i class="bi bi-clock"></i><span>{$guess['time']}</span></div>
                        </div>
                    </div>
                    <div class="progress-box">
                        <div class="progress" style="height: 4px;">
                            <div class="progress-bar bg-warning" role="progressbar" style="width: 25%"></div>
                        </div>
                    </div>
                </div>
                <a
                    href="/videoplay/{$channel}.html?category_id={$category_id}&category_child_id={$category_child_id}&vid={$guess['id']}">
                    <div class="rank-title">{$guess['title']}</div>
                </a>
            </div>
            {/volist}
        </div>
    </div>
    <div class="main-box accordion_login" style="display: none;">
        <div class="login-ran-box">
            <div class="form-group">
                <div class="input-box"><input type="text" name="login_account" placeholder="账号" /></div>
                <div class="input-box"><input type="password" name="login_password" placeholder="密码（6-16位字符）" /></div>
                <div class="tpis-box"><span>没有账号？</span><span style="color:#007bff" class="register-choose">立即注册</span>
                </div>
            </div>
        </div>
    </div><!-- 注册窗口的HTML代码 -->
    <div class="main-box accordion_register" style="display: none;">
        <div class="login-ran-box">
            <div class="form-group">
                <div class="input-box"><input type="text" name="register_account" placeholder="账号" /></div>
                <div class="input-box"><input type="text" name="register_email" placeholder="邮箱 [选填]" /></div>
                <div class="input-box"><input type="password" name="register_password" placeholder="密码（6-16位字符）" />
                </div>
                <div class="input-box"><input type="password" name="register_password_check" placeholder="确认密码" /></div>
                <div class="input-box"><input type="text" name="register_code" style="width: calc(100% - 180px);"
                        placeholder="请输入验证码" /><img src="/captcha.html?t=1691241035" class="code-img captcha"></div>
                <div class="tpis-box"><span>已有账号？</span><span style="color:#007bff" class="login-choose">立即登录</span>
                </div>
            </div>
        </div>
    </div><!-- <script type="text/javascript" src="__JS__/flv.min.js"></script> -->
    <script type="text/javascript" src="__JS__/hls.min.js"></script>
    <script type="text/javascript" src="__JS__/DPlayer.min.js"></script>
    <!-- <script type="text/javascript" src="__JS__/DPlayer.js"></script> -->
    <script>
        // e = 1 点赞 2 = 踩 0 = 收藏
        function requestReport(e, event) {
            let url;
            // report 1 = 增加 0 = 删除
            let report = event.style.color ? 0 : 1;

            if (e == 1) {
                url = '{:url("api/like_report")}'
            } else if (e == 2) {
                url = '{:url("api/step_report")}'
            } else {
                url = '{:url("api/collect_report")}'
            }
            $.ajax({
                url: url,
                data: { type: report, vid: data.video.id },
                type: 'POST',
                success: function (result) {
                    if (result.code == 401) {
                        eventLogin();
                        return
                    }
                    if (result.code == 200) {
                        let num = Number($(event)[0].children[1].innerText);
                        $(event)[0].children[1].innerText = report == 1 ? num + 1 : num - 1;
                        if (event.style.color) {
                            event.style = {};
                        } else {
                            event.style.color = '#f60'
                        }
                        event.dataset.report = 'true'
                        if (e == 1 && $('#video-down-btn')[0].dataset.report === 'true') {
                            let dNum = Number($('#video-down-btn').css('color', '').children('.col-text').text())
                            $('#video-down-btn').children('.col-text').text(dNum > 0 ? (dNum - 1) : 0)
                        }
                        if (e == 2 && $('#video-up-btn')[0].dataset.report === 'true') {
                            let uNum = Number($('#video-up-btn').css('color', '').text())
                            $('#video-up-btn').children('.col-text').text(uNum > 0 ? (uNum - 1) : 0)
                        }
                    } else {
                        new Noty({
                            layout: 'topCenter',
                            theme: 'bootstrap-v4',
                            text: result.msg,
                            progressBar: false,
                            timeout: 1000
                        }).show().setType('warning');
                    }
                }
            })
        }

        // 登录函数
        function eventLogin() {
            try {
                SSwal.close()
            } catch (e) {
            }
            SSwal.fire({
                title: "请登录账号!",
                showCancelButton: true,
                confirmButtonText: '登录',
                cancelButtonText: '取消',
                html: $('.accordion_login').html(),
                preConfirm: (e) => {
                    let content = SSwal.getContent()
                    let $$$ = content.querySelector.bind(content)
                    let account = $$$('input[name=login_account]').value
                    let password = $$$('input[name=login_password]').value
                    if (!account) {
                        new Noty({
                            layout: 'topCenter',
                            theme: 'bootstrap-v4',
                            text: '账号不能为空!',
                            progressBar: false,
                            timeout: 1000
                        }).show().setType('warning');
                        return false;
                    }
                    if (!password) {
                        new Noty({
                            layout: 'topCenter',
                            theme: 'bootstrap-v4',
                            text: '密码不能为空!',
                            progressBar: false,
                            timeout: 1000
                        }).show().setType('warning');
                        return false;
                    }
                    if (password.length < 6) {
                        new Noty({
                            layout: 'topCenter',
                            theme: 'bootstrap-v4',
                            text: '密码长度不低于6位数!',
                            progressBar: false,
                            timeout: 1000
                        }).show().setType('warning');
                        return false;
                    }

                    $.ajax({
                        url: '/personal/login',
                        data: { account: account, password: password },
                        type: 'POST',
                        success: function (res) {
                            console.log(res);
                            if (res.code == 200) {
                                new Noty({
                                    layout: 'topCenter',
                                    theme: 'bootstrap-v4',
                                    text: res.msg,
                                    progressBar: false,
                                    timeout: 1000
                                }).show().setType('success');
                                SSwal.close()
                            } else {
                                new Noty({
                                    layout: 'topCenter',
                                    theme: 'bootstrap-v4',
                                    text: res.msg,
                                    progressBar: false,
                                    timeout: 1000
                                }).show().setType('warning');
                                return false;
                            }
                        }
                    })
                    return false;
                },
                onClose: () => {
                    // 解决UC浏览器video层级太高遮罩弹窗的问题
                    if (window.isVideoZindex) {
                        $('#dplayer').show();
                    }
                }
            })
        }
        // 登录窗口
        $(document).on('click', '.login-choose', function (e) {
            eventLogin();
        })
        // 注册窗口
        $(document).on('click', '.register-choose', function (e) {
            try {
                SSwal.close()
            } catch (e) {
            }
            // 解决UC浏览器video层级太高遮罩弹窗的问题
            if (window.isVideoZindex) {
                $('#dplayer').hide();
            }
            SSwal.fire({
                title: "免费注册",
                showCancelButton: true,
                confirmButtonText: '注册',
                cancelButtonText: '取消',
                html: $('.accordion_register').html(),
                preConfirm: (e) => {
                    let content = SSwal.getContent()
                    let $$$ = content.querySelector.bind(content)
                    let account = $$$('input[name=register_account]').value
                    let email = $$$('input[name=register_email]').value
                    let password = $$$('input[name=register_password]').value
                    let passwordCheck = $$$('input[name=register_password_check]').value
                    let code = $$$('input[name=register_code]').value
                    if (!account) {
                        new Noty({
                            layout: 'topCenter',
                            theme: 'bootstrap-v4',
                            text: '账号不能为空!',
                            progressBar: false,
                            timeout: 1000
                        }).show().setType('warning');
                        return false;
                    }
                    if (email) {
                        // 邮箱校验
                        var reg = /\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/;
                        let isok = reg.test(email);
                        if (!isok) {
                            new Noty({
                                layout: 'topCenter',
                                theme: 'bootstrap-v4',
                                text: '邮箱格式不正确!',
                                progressBar: false,
                                timeout: 1000
                            }).show().setType('warning');
                            return false;
                        }
                    }
                    if (!password) {
                        new Noty({
                            layout: 'topCenter',
                            theme: 'bootstrap-v4',
                            text: '密码不能为空!',
                            progressBar: false,
                            timeout: 1000
                        }).show().setType('warning');
                        return false;
                    }
                    if (password.length < 6) {
                        new Noty({
                            layout: 'topCenter',
                            theme: 'bootstrap-v4',
                            text: '密码长度不低于6位数!',
                            progressBar: false,
                            timeout: 1000
                        }).show().setType('warning');
                        return false;
                    }
                    if (!passwordCheck) {
                        new Noty({
                            layout: 'topCenter',
                            theme: 'bootstrap-v4',
                            text: '确认密码不能为空!',
                            progressBar: false,
                            timeout: 1000
                        }).show().setType('warning');
                        return false;
                    }
                    if (passwordCheck != password) {
                        new Noty({
                            layout: 'topCenter',
                            theme: 'bootstrap-v4',
                            text: '两次密码不同!',
                            progressBar: false,
                            timeout: 1000
                        }).show().setType('warning');
                        return false;
                    }
                    if (!code) {
                        new Noty({
                            layout: 'topCenter',
                            theme: 'bootstrap-v4',
                            text: '请输入验证码!',
                            progressBar: false,
                            timeout: 1000
                        }).show().setType('warning');
                        return false;
                    }

                    $.ajax({
                        url: '/personal/register',
                        data: { account: account, email: email, password: password, code: code },
                        type: 'POST',
                        success: function (res) {
                            console.log(res);
                            if (res.code == 200) {
                                new Noty({
                                    layout: 'topCenter',
                                    theme: 'bootstrap-v4',
                                    text: res.msg,
                                    progressBar: false,
                                    timeout: 1000
                                }).show().setType('success');
                                SSwal.close()
                            } else {
                                new Noty({
                                    layout: 'topCenter',
                                    theme: 'bootstrap-v4',
                                    text: res.msg,
                                    progressBar: false,
                                    timeout: 1000
                                }).show().setType('warning');
                                return false;
                            }
                        }
                    })
                    return false;
                },
                onClose: () => {
                    // 解决UC浏览器video层级太高遮罩弹窗的问题
                    if (window.isVideoZindex) {
                        $('#dplayer').show();
                    }
                }
            })
        })

        // 刷新验证码
        $(document).on('click', '.code-img', function (e) {
            let captcha_src = `/captcha.html?t=${new Date().getTime()}`;
            $(this).attr('src', captcha_src)
        })

        // 复制分享
        // let clipboard = new ClipboardJS('.clipboard-select-binding')
        function copyUrl(e) {
            clipboard = new ClipboardJS('.clipboard-select-binding');
            url = window.location.href;
            $('#copyUrl').val('没穿衣裳，到浏览器打开，直接就能看，没套路：' + url)
            console.log(url)

            clipboard.on('success', function (e) {
                new Noty({
                    layout: 'topCenter',
                    theme: 'bootstrap-v4',
                    text: '已复制链接!',
                    progressBar: false,
                    timeout: 1000
                }).show().setType('warning');
                e.clearSelection();
                clipboard.destroy();
            });
            clipboard.on('error', function (e) {
                new Noty({
                    layout: 'topCenter',
                    theme: 'bootstrap-v4',
                    text: '复制失败!',
                    progressBar: false,
                    timeout: 1000
                }).show().setType('warning');
                clipboard.destroy();
            });
        }

    </script>
    <script>
        var nativeShare = new NativeShare()
        url = window.location.href;
        let xtitle = $(".video-title")[0].innerText
        var shareData = {
            title: xtitle,
            desc: xtitle,
            // 如果是微信该link的域名必须要在微信后台配置的安全域名之内的。
            link: url,
            icon: '',
            // 不要过于依赖以下两个回调，很多浏览器是不支持的
            // success: function() {
            //     alert('分享成功')
            // },
            // fail: function() {
            //     alert('分享失败')
            // }
        }
        nativeShare.setShareData(shareData)

        function sharex(command) {
            try {
                nativeShare.call(command)
            } catch (err) {
                // 如果不支持，你可以在这里做降级处理
                // alert(err.message)
                copyUrl(this)
            }
        }

        function setTitle(title) {
            nativeShare.setShareData({
                title: title,
            })
        }
    </script>
    <script>
        function copyUrlxs(value) {
            clipboard = new ClipboardJS('.clipboard-select-bindings')
            $('#copyUrl1').val(value)

            clipboard.on('success', function (e) {
                new Noty({
                    layout: 'topCenter',
                    theme: 'bootstrap-v4',
                    text: '已复制!',
                    progressBar: false,
                    timeout: 1000
                }).show().setType('warning');
                e.clearSelection();
                clipboard.destroy();
            });
            clipboard.on('error', function (e) {
                new Noty({
                    layout: 'topCenter',
                    theme: 'bootstrap-v4',
                    text: '复制失败!',
                    progressBar: false,
                    timeout: 1000
                }).show().setType('warning');
                clipboard.destroy();
            });
        }
    </script>
    {include file="mobile_footer"}
</body>

</html>